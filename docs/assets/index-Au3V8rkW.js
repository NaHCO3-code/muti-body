var w=Object.defineProperty;var m=(s,e,t)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var a=(s,e,t)=>(m(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class i{constructor(e,t){a(this,"x");a(this,"y");this.x=e,this.y=t}clone(){return new i(this.x,this.y)}add(e){return this.x+=e.x,this.y+=e.y,this}reduce(e){return this.x-=e.x,this.y-=e.y,this}stretch(e){return this.x*=e,this.y*=e,this}distance(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}static add(e,t){return new i(e.x+t.x,e.y+t.y)}static distance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static reduce(e,t){return new i(e.x-t.x,e.y-t.y)}static stretch(e,t){return new i(e.x*t,e.y*t)}}function y(s,e){return s+Math.floor(Math.random()*(e-s))}function l(s,e){return s+Math.random()*(e-s)}const h=class h{constructor(e,t,n){a(this,"position");a(this,"mass");a(this,"velocity");this.position=e,this.mass=t,this.velocity=n}updateVelocity(e){this.velocity.add(i.reduce(e.position,this.position).stretch(h.G*e.mass/Math.pow(i.distance(this.position,e.position),2)))}updatePosition(){this.position.add(this.velocity)}};a(h,"G",.1);let p=h;class u extends p{constructor(t,n,r){var o;super(t,n,r);a(this,"element");a(this,"spaceScale");a(this,"sizeScale");this.spaceScale=1/5,this.sizeScale=50,this.element=document.createElement("div"),this.element.setAttribute("class","body"),(o=document.getElementById("app"))==null||o.appendChild(this.element)}draw(t,n,r){const o=this.mass*this.sizeScale*this.spaceScale,c=i.reduce(this.position,t).stretch(this.spaceScale).add(n).reduce(new i(o,o).stretch(1/2));if(c.x<0||c.x>=r.x||c.y<0||c.y>=r.y){this.element.style.setProperty("display","none");return}else this.element.style.setProperty("display","block");this.element.style.setProperty("--x",`${c.x}px`),this.element.style.setProperty("--y",`${c.y}px`),this.element.style.setProperty("--size",`${Math.max(o,5)}px`)}static init(){}}class x{constructor(e){a(this,"bodies",[]);a(this,"windowSize");this.windowSize=e}add(e){this.bodies.push(e)}update(){for(const e of this.bodies)for(const t of this.bodies)e!==t&&e.updateVelocity(t);for(const e of this.bodies)e.updatePosition()}draw(e,t){for(const n of this.bodies)n.draw(e,t,this.windowSize)}get massCenter(){let e=new i(0,0),t=0;for(let n of this.bodies)e.add(i.stretch(n.position,n.mass)),t+=n.mass;return e.stretch(1/t)}get visualCenter(){let e=new i(0,0),t=0;for(let n of this.bodies)e.add(i.stretch(n.position,Math.pow(n.mass,Math.E))),t+=Math.pow(n.mass,Math.E);return e.stretch(1/t)}get center(){let e=new i(0,0);for(let t of this.bodies)e.add(t.position);return e.stretch(1/this.bodies.length)}}const f={speed:1};(function(){let s=document.getElementById("speed");if(!s)throw new Error("是谁偷偷动了我的DOM?");s.addEventListener("input",e=>{f.speed=parseInt(s.value)})})();let d=new x(new i(window.innerWidth,window.innerHeight));d.add(new u(new i(0,0),3,new i(0,0)));d.add(new u(new i(200,200),1,new i(0,1)));for(let s=0;s<0;++s)d.add(new u(new i(y(-5e3,5e3),y(-5e3,5e3)),l(1,20),new i(l(-3,3),l(-3,3))));setInterval(()=>{for(let s=0;s<f.speed;++s)d.update();d.draw(d.visualCenter,new i(window.innerWidth/2,window.innerHeight/2))},1);
