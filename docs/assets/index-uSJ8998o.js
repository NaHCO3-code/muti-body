var y=Object.defineProperty;var w=(o,e,t)=>e in o?y(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var c=(o,e,t)=>(w(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();class i{constructor(e,t){c(this,"x");c(this,"y");this.x=e,this.y=t}clone(){return new i(this.x,this.y)}add(e){return this.x+=e.x,this.y+=e.y,this}reduce(e){return this.x-=e.x,this.y-=e.y,this}stretch(e){return this.x*=e,this.y*=e,this}distance(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}static add(e,t){return new i(e.x+t.x,e.y+t.y)}static distance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static reduce(e,t){return new i(e.x-t.x,e.y-t.y)}static stretch(e,t){return new i(e.x*t,e.y*t)}}const h=class h{constructor(e,t,r){c(this,"position");c(this,"mass");c(this,"velocity");this.position=e,this.mass=t,this.velocity=r}updateVelocity(e){this.velocity.add(i.reduce(e.position,this.position).stretch(h.G*e.mass/Math.pow(i.distance(this.position,e.position),2)))}updatePosition(){this.position.add(this.velocity)}};c(h,"G",.1);let l=h;class p extends l{constructor(t,r,s){var n;super(t,r,s);c(this,"element");c(this,"spaceScale");c(this,"sizeScale");this.spaceScale=1/5,this.sizeScale=50,this.element=document.createElement("div"),this.element.setAttribute("class","body"),(n=document.getElementById("app"))==null||n.appendChild(this.element)}draw(t,r,s){const n=this.mass*this.sizeScale*this.spaceScale,a=i.reduce(this.position,t).stretch(this.spaceScale).add(r).reduce(new i(n,n).stretch(1/2));if(a.x<0||a.x>=s.x||a.y<0||a.y>=s.y){this.element.style.setProperty("display","none");return}else this.element.style.setProperty("display","block");this.element.style.setProperty("--x",`${a.x}px`),this.element.style.setProperty("--y",`${a.y}px`),this.element.style.setProperty("--size",`${Math.max(n,5)}px`)}static init(){}}class f{constructor(e){c(this,"bodies",[]);c(this,"windowSize");this.windowSize=e}add(e){this.bodies.push(e)}update(){for(const e of this.bodies)for(const t of this.bodies)e!==t&&e.updateVelocity(t);for(const e of this.bodies)e.updatePosition()}draw(e,t){for(const r of this.bodies)r.draw(e,t,this.windowSize)}get massCenter(){let e=new i(0,0),t=0;for(let r of this.bodies)e.add(i.stretch(r.position,r.mass)),t+=r.mass;return e.stretch(1/t)}get visualCenter(){let e=new i(0,0),t=0;for(let r of this.bodies)e.add(i.stretch(r.position,Math.pow(r.mass,Math.E))),t+=Math.pow(r.mass,Math.E);return e.stretch(1/t)}get center(){let e=new i(0,0);for(let t of this.bodies)e.add(t.position);return e.stretch(1/this.bodies.length)}}const u={speed:1};(function(){let o=document.getElementById("speed");if(!o)throw new Error("是谁偷偷动了我的DOM?");o.addEventListener("input",e=>{u.speed=parseInt(o.value)})})();let d=new f(new i(window.innerWidth,window.innerHeight));d.add(new p(new i(0,0),3,new i(0,0)));d.add(new p(new i(200,200),1,new i(0,1)));setInterval(()=>{for(let o=0;o<u.speed;++o)d.update();d.draw(d.visualCenter,new i(window.innerWidth/2,window.innerHeight/2))},1);
